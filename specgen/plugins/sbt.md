# Sbt

Spec scala code generation is packaged in form of SBT plugins. Add `sbt-spec` plugin library into your project using following line in your `plugins.sbt`:

```text
addSbtPlugin("spec" % "sbt-spec" % "<version>")
```

Instead of `<version>` use latest available from [Bintray](https://bintray.com/sbt/sbt-plugin-releases?filterByPkgName=sbt-spec). The `sbt-spec` library contains several plugins each serving specific purpose and wrapping specific `specgen` tool command.

Some of generated code relies on base libraries that are hosted in JCenter repository. Therefore includion of that repository is required in your `build.sbt`:

```text
useJCenter := true
```

Under the hood all spec SBT plugins are running [specgen](https://github.com/ModaOperandi/specgen) command line tool.

## **Scala Play Service**

Spec code generation has full support for Scala Play applications. Models, controllers, services traits and services scaffolded implementations are generated by `SpecPlay` plugin.

To enable server side code generation from spec enable `SpecPlay` plugin in your `build.sbt`:

```text
enablePlugins(SpecPlay)
```

Following dependencies are defined in `SpecPlay` and should be added into `libraryDependencies`:

```text
libraryDependencies ++= specPlayDependencies
```

Here are `SpecPlay` settings that allow customization of code generation:

| Setting | Default | Description |
| :--- | :--- | :--- |
| specFile | `spec.yaml` | Path to spec file relative to project folder |
| specSwagger | `public` | Path to folder for generated swagger file |
| specGeneratePath | `target/scala/src_managed/main/spec` | Path to generated code is placed |
| specServicesPath | `app/services` | Path to scaffolded services files; these services are scaffolded only if they do not exist |
| specRoutesPath | `conf` | Path to folder for generated Play routes file |

Default settings are aligned with the standard [Play application layout](https://www.playframework.com/documentation/2.7.x/Anatomy).

The generated swagger (OpenAPI) spec is hosted at `/docs` route of the Play application.

## **Scala Sttp Client**

Spec code generation can generate HTTP client in Scala based on spec. The generated client is using [sttp](https://github.com/softwaremill/sttp) client under the hood with provided ability to plugin backend of your taste.

To enable client code generation from spec enable `SpecSttp` plugin in your `build.sbt`:

```text
enablePlugins(SpecSttp)
```

Following dependencies are defined in `SpecSttp` and should be added into `libraryDependencies`:

```text
libraryDependencies ++= specSttpDependencies
```

Here are `SpecSttp` settings that allow customization of code generation:

| Setting | Default | Description |
| :--- | :--- | :--- |
| specFile | `spec.yaml` | Path to spec file relative to project folder |
| specGeneratePath | `target/scala/src_managed/main/spec` | Path to generated code is placed |

## **Scala Models**

Spec code generation can generate only (de)serializable to JSON models without any application specifics.

To enable models generation from spec enable `SpecModels` plugin in your `build.sbt`:

```text
enablePlugins(SpecModels)
```

Following dependencies are defined in `SpecModels` and should be added into `libraryDependencies`:

```text
libraryDependencies ++= specModelDependencies
```

Here are `SpecModels` settings that allow customization of code generation:

| Setting | Default | Description |
| :--- | :--- | :--- |
| specFile | `spec.yaml` | Path to spec file relative to project folder |
| specGeneratePath | `target/scala/src_managed/main/spec` | Path to generated code is placed |
